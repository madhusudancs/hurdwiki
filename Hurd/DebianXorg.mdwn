# <a name="Setting_up_Xorg_on_Debian_GNU_Hu"> </a> Setting up Xorg on Debian GNU/Hurd

#### <a name="Table_Of_Contents"> Table Of Contents </a>

%TOC%

This is a brief helper on how to setup Xorg on Debian GNU/Hurd.

Obviously this text is taken from the page <http://hurd.gnufans.org/bin/view/Hurd/DebianX> but I was making such drastic changes, I didn't want to hack up that page.

### <a name="Mouse_amp_Keyboard"> Mouse &amp; Keyboard </a>

See [[console]] for more details.

You should instruct the Hurd console to repeat keyboard events to `/dev/cons/kbd`, and mouse events to `/dev/cons/mouse`:

    # console -d vga -d pc_kbd --repeat=kbd -d generic_speaker \
      -d pc_mouse --repeat=mouse --protocol=ps/2 -c /dev/vcs

Symbolic links to repeaters should also be created:

    # ln -s /dev/cons/kbd /dev/kbd
    # ln -s /dev/cons/mouse /dev/mouse

### <a name="Selecting_amp_Configuring_Packag"> Selecting &amp; Configuring Packages </a>

The `x-window-system-core` package brings you most of what you need for a base, plus you need to choose a window manager:

* WindowMaker, `wmaker`
* FVWM, `fvwm`
* Blackbox, `blackbox`
* TWM, `twm`

I know that Window Maker works, however, I cannot attest to the others. xfce4 might be temporarily broken.

The recommended way of configuring X is using the `xserver-xorg` debconf template, eg:

    # dpkg-reconfigure xserver-xorg

This currently seems to be broken in the Debian package so it may be easier to just copy a working configuration from another operating system on the same computer and place it in `/etc/X11/xorg.conf`. You need to edit the mouse settings by hand according to the below example, though.

**_IMPORTANT:_** when you configure X, make sure you do **NOT** enable the `speedo` and `dri` modules because they are currently broken.

**BDd: I cannot attest to this currently.**

### <a name="Edit_xorg_conf"> Edit xorg.conf </a>

If you managed to get an xorg.conf autogenerated, make sure to have the mouse section read as follows:

    Section "InputDevice"
       Identifier   "Configured Mouse"
       Driver      "mouse"
       Option      "CorePointer"
       Option      "Device"      "/dev/mouse"
       Option      "Protocol"      "osmouse"
    EndSection

Do not set the "Emulate3Button" or "ZAxisMapping" options, they do not work and break things.

Here is an example of an xorg.conf using VESA at 800x600 that works on my Dell laptop:

    # /etc/X11/xorg.conf (xorg X Window System server configuration file)
    #
    # This file was generated by dexconf, the Debian X Configuration tool, using
    # values from the debconf database.
    #
    # Edit this file with caution, and see the /etc/X11/xorg.conf manual page.
    # (Type "man /etc/X11/xorg.conf" at the shell prompt.)
    #
    # This file is automatically updated on xserver-xorg package upgrades *only*
    # if it has not been modified since the last upgrade of the xserver-xorg
    # package.
    #
    # If you have edited this file but would like it to be automatically updated
    # again, run the following command:
    #   sudo dpkg-reconfigure -phigh xserver-xorg

    Section "Files"
       FontPath   "/usr/share/X11/fonts/misc"
       FontPath   "/usr/share/X11/fonts/cyrillic"
       FontPath   "/usr/share/X11/fonts/100dpi/:unscaled"
       FontPath   "/usr/share/X11/fonts/75dpi/:unscaled"
       FontPath   "/usr/share/X11/fonts/Type1"
       FontPath   "/usr/share/X11/fonts/CID"
       FontPath   "/usr/share/X11/fonts/100dpi"
       FontPath   "/usr/share/X11/fonts/75dpi"
            # paths to defoma fonts
       FontPath   "/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
       FontPath   "/var/lib/defoma/x-ttcidfont-conf.d/dirs/CID"
    EndSection

    Section "Module"
       Load   "GLcore"
       Load   "i2c"
       Load   "bitmap"
       Load   "ddc"
       Load   "extmod"
       Load   "freetype"
       Load   "glx"
       Load   "int10"
       Load   "type1"
       Load   "vbe"
    EndSection

    Section "InputDevice"
       Identifier   "Generic Keyboard"
       Driver      "kbd"
       Option      "CoreKeyboard"
       Option      "XkbRules"   "xorg"
       Option      "XkbModel"   "pc104"
       Option      "XkbLayout"   "us"
    EndSection

    Section "InputDevice"
       Identifier   "Configured Mouse"
       Driver      "mouse"
       Option      "CorePointer"
       Option      "Device"      "/dev/mouse"
       Option      "Protocol"      "osmouse"
    EndSection

    Section "InputDevice"
       Identifier   "Synaptics Touchpad"
       Driver      "synaptics"
       Option      "SendCoreEvents"   "true"
       Option      "Device"      "/dev/psaux"
       Option      "Protocol"      "auto-dev"
       Option      "HorizScrollDelta"   "0"
    EndSection

    Section "Device"
       Identifier   "Videocard0"
       Driver      "vesa"
    EndSection

    Section "Monitor"
       Identifier   "Monitor0"
       VendorName   "Dell"
       HorizSync   31.5 - 90.0
       VertRefresh   59.0 - 85.0
       Option      "DPMS"
    EndSection

    Section "Screen"
       Identifier   "Screen0"
       Device      "Videocard0"
       Monitor      "Monitor0"
       DefaultDepth   24
       SubSection "Display"
          Depth      1
          Modes      "800x600"
       EndSubSection
       SubSection "Display"
          Depth      4
          Modes      "800x600"
       EndSubSection
       SubSection "Display"
          Depth      8
          Modes      "800x600"
       EndSubSection
       SubSection "Display"
          Depth      15
          Modes      "800x600"
       EndSubSection
       SubSection "Display"
          Depth      16
          Modes      "800x600"
       EndSubSection
       SubSection "Display"
          Depth      24
          Modes      "800x600"
       EndSubSection
    EndSection

    Section "DRI"
       Mode   0666
    EndSection

### <a name="Starting_X"> Starting X </a>

Finally, run `startx`

However, there are several caveats to be aware of:

* `update-menu` does not yet work. As such, there are no fine Debian menus.

**_WARNING:_** If you get an error about opening the display or a permissions issue, you may need to run the following:

    # dpkg-reconfigure x11-common

change from "Console Users Only" to "Anybody"

Good luck and enjoy!

----

-- [[Main/BarryDeFreese]] - 02 Mar 2006
